## 6.7 – テーブル操作

このライブラリはテーブル操作のための汎用関数を提供します。すべての関数はテーブル `table` の内部に提供されます。

操作がテーブルの長さを必要とする場合は常に、長さ演算子に関するすべての注意事項が適用されます（[§3.4.7](#347--長さ演算子) 参照）。すべての関数は、引数として与えられたテーブル内の非数値キーを無視します。

---

### table.concat (list [, sep [, i [, j]]])

すべての要素が文字列または数値であるリストが与えられた場合、文字列 `list[i]..sep..list[i+1] ··· sep..list[j]` を返します。`sep` のデフォルト値は空文字列であり、`i` のデフォルトは 1、`j` のデフォルトは `#list` です。`i` が `j` より大きい場合、空文字列を返します。

---

### table.create (nseq [, nrec])

メモリを事前割り当てして、新しい空のテーブルを作成します。テーブルが持つ要素の数を事前に知っている場合、この事前割り当てはパフォーマンスの向上とメモリの節約に役立つ場合があります。

パラメータ `nseq` は、テーブルがシーケンスとして持つ要素数のヒントです。オプションパラメータ `nrec` は、テーブルが持つその他の要素数のヒントです。デフォルトは 0 です。

---

### table.insert (list, [pos,] value)

要素 `value` を `list` の位置 `pos` に挿入し、要素 `list[pos],list[pos+1],···,list[#list]` を上にシフトします。`pos` のデフォルト値は `#list+1` であるため、呼び出し `table.insert(t,x)` はリスト `t` の末尾に `x` を挿入します。

---

### table.move (a1, f, e, t [,a2])

テーブル `a1` からテーブル `a2` へ要素を移動し、以下の多重代入と同等の処理を行います：`a2[t],··· = a1[f],···,a1[e]`。`a2` のデフォルトは `a1` です。移動先の範囲は移動元の範囲と重なることができます。移動する要素の数はLua整数に収まる必要があります。`f` が `e` より大きい場合、何も移動されません。

移動先テーブル `a2` を返します。

---

### table.pack (···)

すべての引数をキー 1, 2 などに格納し、引数の総数を示すフィールド "`n`" を持つ新しいテーブルを返します。いくつかの引数が **nil** の場合、結果のテーブルはシーケンスでない可能性があることに注意してください。

---

### table.remove (list [, pos])

`list` から位置 `pos` の要素を削除し、削除された要素の値を返します。`pos` が 1 から `#list` までの整数の場合、要素 `list[pos+1],list[pos+2],···,list[#list]` を下にシフトし、要素 `list[#list]` を消去します。インデックス `pos` は、`#list` が 0 の場合は 0、または `#list + 1` も指定できます。

`pos` のデフォルト値は `#list` であるため、呼び出し `table.remove(l)` はリスト `l` の最後の要素を削除します。

---

### table.sort (list [, comp])

リストの要素を指定された順序で*その場で*ソートします。`list[1]` から `list[#list]` まで。`comp` が与えられた場合、2つのリスト要素を受け取り、最初の要素が最終的な順序で2番目の要素より前に来る必要がある場合に true を返す関数でなければなりません。ソート後、`i <= j` は `not comp(list[j],list[i])` を意味します。`comp` が与えられていない場合、代わりに標準Lua演算子 `<` が使用されます。

`comp` 関数は一貫した順序を定義する必要があります。より形式的には、関数は厳密な弱順序を定義する必要があります。（弱順序は全順序に類似していますが、比較目的で異なる要素を等しいと見なすことができます。）

ソートアルゴリズムは安定ではありません：指定された順序で等しいと見なされる異なる要素は、ソートによって相対的な位置が変わる可能性があります。

---

### table.unpack (list [, i [, j]])

指定されたリストから要素を返します。この関数は以下と同等です：

```lua
return list[i], list[i+1], ···, list[j]
```

デフォルトでは、`i` は 1、`j` は `#list` です。
