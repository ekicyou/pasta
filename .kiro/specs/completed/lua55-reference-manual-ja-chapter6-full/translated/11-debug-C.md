## 6.11 – デバッグライブラリ（パートC: setmetatable-upvaluejoin）

---

### debug.setmetatable (value, table)

指定された `value` のメタテーブルを指定された `table`（**nil** でも可）に設定します。`value` を返します。

---

### debug.setupvalue (f, up, value)

この関数は、値 `value` を関数 `f` のインデックス `up` を持つ上位値に代入します。関数は指定されたインデックスを持つ上位値がない場合は **fail** を返します。それ以外の場合、上位値の名前を返します。

上位値についての詳細は [`debug.getupvalue`](#debuggetupvalue-f-up) を参照してください。

---

### debug.setuservalue (udata, value, n)

指定された `value` を、指定された `udata` に関連付けられた `n` 番目のユーザー値として設定します。`udata` はフルユーザーデータでなければなりません。

`udata` を返すか、ユーザーデータがその値を持たない場合は **fail** を返します。

---

### debug.traceback ([thread,] [message [, level]])

`message` が存在するが文字列でも **nil** でもない場合、この関数はさらなる処理なしで `message` を返します。それ以外の場合、コールスタックのトレースバックを含む文字列を返します。オプションの `message` 文字列はトレースバックの先頭に追加されます。オプションの `level` 数値は、トレースバックを開始するレベルを示します（デフォルトは 1、`traceback` を呼び出している関数）。

---

### debug.upvalueid (f, n)

指定された関数から番号 `n` の上位値に対する一意の識別子（軽量ユーザーデータとして）を返します。

これらの一意の識別子により、プログラムは異なるクロージャが上位値を共有しているかどうかを確認できます。上位値を共有するLuaクロージャ（つまり、同じ外部ローカル変数にアクセスするクロージャ）は、それらの上位値インデックスに対して同一のIDを返します。

---

### debug.upvaluejoin (f1, n1, f2, n2)

Luaクロージャ `f1` の `n1` 番目の上位値が、Luaクロージャ `f2` の `n2` 番目の上位値を参照するようにします。
