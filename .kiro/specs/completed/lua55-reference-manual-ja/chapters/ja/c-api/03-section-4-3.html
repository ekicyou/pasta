<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Lua 5.5 - Section 4.3</title>
</head>
<body>
<h2>4.3 – <a name="4.3">レジストリ</a></h2>

<p>Luaは、任意のCコードがLua値を格納するために使用できる、事前定義されたテーブルである<em>レジストリ</em>を提供します。レジストリテーブルは、常に擬似インデックス<a name="pdf-LUA_REGISTRYINDEX"><code>LUA_REGISTRYINDEX</code></a>でアクセスできます。任意のCライブラリは、このテーブルにデータを格納できますが、他のライブラリが使用するキーとは異なるキーを選択して、競合を回避する必要があります。通常、キーとしてライブラリ名を含む文字列、またはコード内のCオブジェクトのアドレスを持つライトuserdata、またはコードによって作成された任意のLuaオブジェクトを使用する必要があります。変数名と同様に、アンダースコアで始まり、大文字が続く文字列キーはLua用に予約されています。</p><p>レジストリの整数キーは、参照メカニズム（<a href="#luaL_ref"><code>luaL_ref</code></a>を参照）およびいくつかの事前定義された値によって使用されます。したがって、レジストリの整数キーを他の目的で使用しないでください。</p><p>新しいLua状態を作成すると、そのレジストリにはいくつかの事前定義された値が付属します。これらの事前定義された値には、<code>lua.h</code>の定数として定義された整数キーでインデックスが付けられています。次の定数が定義されています</p><ul>
<li><b><a name="pdf-LUA_RIDX_MAINTHREAD"><code>LUA_RIDX_MAINTHREAD</code></a>: </b> このインデックスでは、レジストリは状態のメインスレッドを持ちます。（メインスレッドは、状態とともに作成されたものです。）</li>

<li><b><a name="pdf-LUA_RIDX_GLOBALS"><code>LUA_RIDX_GLOBALS</code></a>: </b> このインデックスでは、レジストリはグローバル環境を持ちます。</li>
</ul>





</body>
</html>
