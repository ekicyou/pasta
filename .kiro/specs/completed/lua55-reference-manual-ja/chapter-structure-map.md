# Lua 5.5 ↔ 5.4 章構成マッピング表

> 作成日: 2026-01-29  
> 目的: 翻訳時に Lua 5.5 英語版と Lua 5.4 日本語版の対応を確保するための構成比較

## サマリー

| 項目 | Lua 5.5 (EN) | Lua 5.4 (JA) | 差分 |
|------|-------------|-------------|------|
| 総章数 | 9章 | 9章 | 同一 |
| 総節数 | 31節 | 32節 | -1（5.5では§2.2が変更、5.4では§3.5追加） |
| 構成変更あり | 2章§2.2, 6章節番号 | 3章§3.5 | 詳細下記 |

---

## 1章: Introduction / はじめに

| Lua 5.5 (EN) | Lua 5.4 (JA) | 対応状態 | 備考 |
|--------------|--------------|---------|------|
| 1 – Introduction | 1 – はじめに | ✅完全一致 | |

**分割判断**: なし（小章）

---

## 2章: Basic Concepts / 基本概念

| Lua 5.5 (EN) | Lua 5.4 (JA) | 対応状態 | 備考 |
|--------------|--------------|---------|------|
| 2 – Basic Concepts | 2 – 基本概念 | ✅完全一致 | |
| 2.1 – Values and Types | 2.1 – 値と型 | ✅完全一致 | |
| 2.2 – **Scopes, Variables, and Environments** | 2.2 – **環境とグローバル環境** | ⚠️内容変更 | 5.5では`global`キーワード導入によりタイトル・内容が変更 |
| 2.3 – Error Handling | 2.3 – エラー処理 | ✅完全一致 | |
| 2.4 – Metatables and Metamethods | 2.4 – メタテーブルとメタメソッド | ✅完全一致 | |
| 2.5 – Garbage Collection | 2.5 – ガベージコレクション | ✅完全一致 | |
| 2.6 – Coroutines | 2.6 – コルーチン | ✅完全一致 | |

**分割判断**: なし（中章）  
**注意事項**: §2.2は5.5で大幅に変更（`global`キーワード追加）。参考にはなるが完全対応ではない。

---

## 3章: The Language / 言語

| Lua 5.5 (EN) | Lua 5.4 (JA) | 対応状態 | 備考 |
|--------------|--------------|---------|------|
| 3 – The Language | 3 – 言語 | ✅完全一致 | |
| 3.1 – Lexical Conventions | 3.1 – 字句規則 | ✅完全一致 | |
| 3.2 – Variables | 3.2 – 変数 | ✅完全一致 | |
| 3.3 – Statements | 3.3 – ステートメント | ✅完全一致 | |
| 3.4 – Expressions | 3.4 – 式 | ✅完全一致 | |
| （なし） | 3.5 – 可視性ルール | ⚠️5.5になし | 5.5では§2.2に統合された可能性 |

**分割判断**: サブ分割可（40-50KB推定、§3.3/3.4が大きい）  
**サブ分割対応**: ✅§3.1-3.4は完全対応。5.4の§3.5は5.5になし（翻訳時参考不可）

---

## 4章: The Application Program Interface / C API（大規模）

| Lua 5.5 (EN) | Lua 5.4 (JA) | 対応状態 | 備考 |
|--------------|--------------|---------|------|
| 4 – The Application Program Interface | 4 – アプリケーションプログラミングインターフェイス | ✅完全一致 | |
| 4.1 – The Stack | 4.1 – スタック | ✅完全一致 | |
| 4.2 – C Closures | 4.2 – Cクロージャ | ✅完全一致 | |
| 4.3 – Registry | 4.3 – レジストリ | ✅完全一致 | |
| 4.4 – Error Handling in C | 4.4 – Cでのエラー処理 | ✅完全一致 | |
| 4.5 – Handling Yields in C | 4.5 – Cでの中断の処理 | ✅完全一致 | |
| 4.6 – Functions and Types | 4.6 – 関数と型 | ✅完全一致 | |
| 4.7 – The Debug Interface | 4.7 – デバッグインターフェース | ✅完全一致 | |

**分割判断**: **サブ分割推奨**（80-100KB推定）  
**サブ分割対応**: ✅全節完全対応。§4.6が最大（API関数リスト）

### 4章サブ分割計画

| サブファイル | 含む節 | 推定サイズ | 対応日本語節 |
|-------------|-------|-----------|------------|
| 04-c-api/01-stack.md | §4.1-4.2 | 10-15KB | §4.1-4.2 ✅ |
| 04-c-api/02-registry.md | §4.3-4.5 | 15-20KB | §4.3-4.5 ✅ |
| 04-c-api/03-functions.md | §4.6 | 40-60KB | §4.6 ✅ |
| 04-c-api/04-debug.md | §4.7 | 10-15KB | §4.7 ✅ |

---

## 5章: The Auxiliary Library / 補助ライブラリ

| Lua 5.5 (EN) | Lua 5.4 (JA) | 対応状態 | 備考 |
|--------------|--------------|---------|------|
| 5 – The Auxiliary Library | 5 – 補助ライブラリ | ✅完全一致 | |
| 5.1 – Functions and Types | 5.1 – 関数と型 | ✅完全一致 | |

**分割判断**: なし（中章）

---

## 6章: The Standard Libraries / 標準ライブラリ（大規模）

| Lua 5.5 (EN) | Lua 5.4 (JA) | 対応状態 | 備考 |
|--------------|--------------|---------|------|
| 6 – The Standard Libraries | 6 – 標準ライブラリ | ✅完全一致 | |
| 6.1 – Loading the Libraries in C code | （なし） | ⚠️5.5のみ | 5.5で新設、5.4には対応節なし |
| 6.2 – Basic Functions | 6.1 – 基本関数 | ✅対応あり | 節番号ずれ（5.5:6.2 ↔ 5.4:6.1） |
| 6.3 – Coroutine Manipulation | 6.2 – コルーチン操作 | ✅対応あり | 節番号ずれ |
| 6.4 – Modules | 6.3 – モジュール | ✅対応あり | 節番号ずれ |
| 6.5 – String Manipulation | 6.4 – 文字列操作 | ✅対応あり | 節番号ずれ |
| 6.6 – UTF-8 Support | 6.5 – UTF-8 サポート | ✅対応あり | 節番号ずれ |
| 6.7 – Table Manipulation | 6.6 – テーブル操作 | ✅対応あり | 節番号ずれ |
| 6.8 – Mathematical Functions | 6.7 – 数学関数 | ✅対応あり | 節番号ずれ |
| 6.9 – Input and Output Facilities | 6.8 – 入出力機能 | ✅対応あり | 節番号ずれ |
| 6.10 – Operating System Facilities | 6.9 – オペレーティングシステム機能 | ✅対応あり | 節番号ずれ |
| 6.11 – The Debug Library | 6.10 – デバッグライブラリ | ✅対応あり | 節番号ずれ |

**分割判断**: **サブ分割推奨**（80-100KB推定）  
**サブ分割対応**: 5.5 §6.1は5.4に対応なし。それ以外は節番号ずれあるが対応可能。

### 6章サブ分割計画

| サブファイル | Lua 5.5節 | Lua 5.4対応節 | 備考 |
|-------------|----------|--------------|------|
| 06-standard-libraries/01-loading.md | §6.1 | なし | ⚠️5.5新設、参考なし |
| 06-standard-libraries/02-basic.md | §6.2 | §6.1 ✅ | |
| 06-standard-libraries/03-coroutine.md | §6.3 | §6.2 ✅ | |
| 06-standard-libraries/04-modules.md | §6.4 | §6.3 ✅ | |
| 06-standard-libraries/05-string.md | §6.5 | §6.4 ✅ | |
| 06-standard-libraries/06-utf8.md | §6.6 | §6.5 ✅ | |
| 06-standard-libraries/07-table.md | §6.7 | §6.6 ✅ | |
| 06-standard-libraries/08-math.md | §6.8 | §6.7 ✅ | |
| 06-standard-libraries/09-io.md | §6.9 | §6.8 ✅ | |
| 06-standard-libraries/10-os.md | §6.10 | §6.9 ✅ | |
| 06-standard-libraries/11-debug.md | §6.11 | §6.10 ✅ | |

---

## 7章: Lua Standalone / Luaスタンドアロン

| Lua 5.5 (EN) | Lua 5.4 (JA) | 対応状態 | 備考 |
|--------------|--------------|---------|------|
| 7 – Lua Standalone | 7 – Luaスタンドアロン | ✅完全一致 | |

**分割判断**: なし（小章）

---

## 8章: Incompatibilities / 非互換性

| Lua 5.5 (EN) | Lua 5.4 (JA) | 対応状態 | 備考 |
|--------------|--------------|---------|------|
| 8 – Incompatibilities with the Previous Version | 8 – 以前のバージョンとの非互換性 | ✅完全一致 | |
| 8.1 – Incompatibilities in the Language | 8.1 – 言語の非互換性 | ✅完全一致 | 5.5独自内容（5.4→5.5） |
| 8.2 – Incompatibilities in the Libraries | 8.2 – ライブラリの非互換性 | ✅完全一致 | 5.5独自内容 |
| 8.3 – Incompatibilities in the API | 8.3 – APIの非互換性 | ✅完全一致 | 5.5独自内容 |

**分割判断**: なし（小章）  
**注意事項**: 8章全体が5.5固有の内容（5.4→5.5の変更点）。5.4版は用語参考程度。

---

## 9章: The Complete Syntax / 完全な構文

| Lua 5.5 (EN) | Lua 5.4 (JA) | 対応状態 | 備考 |
|--------------|--------------|---------|------|
| 9 – The Complete Syntax of Lua | 9 – Luaの完全な構文 | ✅完全一致 | |

**分割判断**: なし（小章）

---

## 構成差分サマリー

### 5.5にのみ存在する節（5.4対応なし）

| 節番号 | 節タイトル | 対応方針 |
|-------|----------|---------|
| 2.2 | Scopes, Variables, and Environments | 5.4 §2.2を参考にしつつ、`global`キーワード関連は独自翻訳 |
| 6.1 | Loading the Libraries in C code | 独自翻訳（参考なし） |

### 5.4にのみ存在する節（5.5対応なし）

| 節番号 | 節タイトル | 備考 |
|-------|----------|------|
| 3.5 | 可視性ルール | 5.5では§2.2に統合された可能性 |

### 節番号ずれ（6章）

5.5では§6.1が新設されたため、§6.2以降は5.4より+1の節番号ずれが発生。
翻訳時は節番号ではなく**節タイトル**で対応を取ること。

---

## 分割計画まとめ

| 章 | 分割種別 | 推定ファイル数 | 5.4対応 |
|---|---------|--------------|--------|
| 1章 | 単一 | 1 | ✅完全 |
| 2章 | 単一 | 1 | ⚠️§2.2のみ部分対応 |
| 3章 | 単一 | 1 | ⚠️§3.5なし |
| 4章 | **サブ分割** | 4 | ✅完全 |
| 5章 | 単一 | 1 | ✅完全 |
| 6章 | **サブ分割** | 11 | ⚠️§6.1なし、他は節番号ずれあり |
| 7章 | 単一 | 1 | ✅完全 |
| 8章 | 単一 | 1 | ⚠️5.5固有内容 |
| 9章 | 単一 | 1 | ✅完全 |
| Index | 単一 | 1 | ✅完全 |

**合計ファイル数**: 23ファイル（サブ分割含む）

---

## 翻訳時の注意事項

1. **§2.2（Scopes, Variables, and Environments）**: 5.5で`global`キーワードが導入され、タイトル・内容が大幅変更。5.4版は参考程度に留め、独自翻訳を行う。

2. **§6.1（Loading the Libraries in C code）**: 5.5新設節。5.4に対応なし、完全に独自翻訳。

3. **6章の節番号ずれ**: 翻訳時は節タイトルでマッチングし、5.4の対応節を参照すること。

4. **8章（非互換性）**: 内容は5.5固有（5.4→5.5の変更点）。5.4版は用語参考のみ、翻訳内容は独自。

5. **§3.5（可視性ルール）**: 5.4にのみ存在。5.5では別節に統合されたと思われる。
