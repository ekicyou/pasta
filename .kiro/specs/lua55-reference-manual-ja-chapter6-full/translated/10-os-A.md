## 6.10 – オペレーティングシステム機能

このライブラリはテーブル `os` を通じて実装されています。

---

### os.clock ()

基盤となるISO C関数 `clock` が返す値として、プログラムが使用したCPU時間の秒単位の近似値を返します。

---

### os.date ([format [, time]])

指定された文字列 `format` に従ってフォーマットされた日付と時刻を含む文字列またはテーブルを返します。

`time` 引数が存在する場合、これはフォーマットされる時刻です（この値の説明は [`os.time`](#ostime-table) 関数を参照）。それ以外の場合、`date` は現在の時刻をフォーマットします。

`format` が '`!`' で始まる場合、日付は協定世界時でフォーマットされます。このオプションの文字の後、`format` が文字列 "`*t`" の場合、`date` は以下のフィールドを持つテーブルを返します：`year`、`month`（1–12）、`day`（1–31）、`hour`（0–23）、`min`（0–59）、`sec`（0–61、うるう秒のため）、`wday`（曜日、1–7、日曜日が 1）、`yday`（年の日、1–366）、`isdst`（夏時間フラグ、ブール値）。情報が利用できない場合、この最後のフィールドは存在しない可能性があります。

`format` が "`*t`" でない場合、`date` はISO C関数 `strftime` と同じ規則に従ってフォーマットされた文字列として日付を返します。

`format` が省略された場合、デフォルトは "`%c`" であり、現在のロケールを使用して人間が読める日付と時刻の表現を返します。

非POSIXシステムでは、この関数はC関数 `gmtime` とC関数 `localtime` に依存するため、スレッドセーフでない場合があります。

---

### os.difftime (t2, t1)

時刻 `t1` から時刻 `t2` までの差を秒単位で返します（時刻は [`os.time`](#ostime-table) が返す値）。POSIX、Windows、およびその他一部のシステムでは、この値は正確に `t2`−`t1` です。

---

### os.execute ([command])

この関数はISO C関数 `system` と等価です。`command` をオペレーティングシステムのシェルによって実行されるために渡します。最初の結果は、コマンドが正常に終了した場合は **true**、そうでなければ **fail** です。この最初の結果の後、関数は文字列と数値を返します：

| 文字列 | 説明 |
|--------|------|
| `"exit"` | コマンドが正常に終了した場合。続く数値はコマンドの終了ステータス。 |
| `"signal"` | コマンドがシグナルによって終了した場合。続く数値はコマンドを終了させたシグナル。 |

`command` なしで呼び出された場合、`os.execute` はシェルが利用可能かどうかを示すブール値を返します。

---

### os.exit ([code [, close]])

ISO C関数 `exit` を呼び出してホストプログラムを終了します。`code` が **true** の場合、返されるステータスは `EXIT_SUCCESS` です。`code` が **false** の場合、返されるステータスは `EXIT_FAILURE` です。`code` が数値の場合、返されるステータスはその数値です。`code` のデフォルト値は **true** です。

オプションの2番目の引数 `close` が true の場合、関数は終了前にLuaステートを閉じます（[`lua_close`](#lua_close) 参照）。

---

### os.getenv (varname)

プロセス環境変数 `varname` の値を返すか、変数が定義されていない場合は **fail** を返します。
