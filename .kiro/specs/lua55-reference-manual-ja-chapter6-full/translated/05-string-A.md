## 6.5 – 文字列操作（パートA: string.byte-string.find）

このライブラリは、部分文字列の検索と抽出、パターンマッチングなど、文字列操作のための汎用関数を提供します。Luaで文字列をインデックスするとき、最初の文字は位置 1 にあります（C のように 0 ではありません）。インデックスは負の値が許可され、文字列の末尾から後方にインデックスすると解釈されます。したがって、最後の文字は位置 -1 にあります。

文字列ライブラリはすべての関数をテーブル `string` の中に提供します。また、文字列にメタテーブルを設定し、`__index` フィールドが `string` テーブルを指すようにします。したがって、オブジェクト指向スタイルで文字列関数を使用できます。例えば、`string.byte(s,i)` は `s:byte(i)` と書くことができます。

文字列ライブラリは1バイト文字エンコーディングを想定しています。

---

### string.byte (s [, i [, j]])

文字 `s[i]`、`s[i+1]`、...、`s[j]` の内部数値コードを返します。`i` のデフォルト値は 1 です。`j` のデフォルト値は `i` です。これらのインデックスは関数 [`string.sub`](#stringsub-s-i--j) と同じルールに従って修正されます。

数値コードはプラットフォーム間で必ずしも移植可能ではありません。

---

### string.char (···)

0個以上の整数を受け取ります。引数の数と等しい長さの文字列を返し、各文字は対応する引数と等しい内部数値コードを持ちます。

数値コードはプラットフォーム間で必ずしも移植可能ではありません。

---

### string.dump (function [, strip])

与えられた関数のバイナリ表現（*バイナリチャンク*）を含む文字列を返します。これにより、この文字列に対する後の [`load`](#pdf-load) は関数のコピーを返します（ただし、新しいアップバリューを持ちます）。`strip` が真の値の場合、バイナリ表現はスペースを節約するために関数に関するすべてのデバッグ情報を含まないかもしれません。

アップバリューを持つ関数は、アップバリューの数のみが保存されます。（再）ロードされると、それらのアップバリューはフレッシュなインスタンスを受け取ります。（これらのアップバリューがどのように初期化されるかの詳細については [`load`](#pdf-load) 関数を参照してください。デバッグライブラリを使用して、ニーズに適した方法で関数のアップバリューをシリアライズおよび再ロードできます。）

---

### string.find (s, pattern [, init [, plain]])

文字列 `s` 内で `pattern`（[§6.5.1](#651--パターン) 参照）の最初のマッチを探します。マッチを見つけた場合、`find` はこの出現が始まる `s` のインデックスと終わるインデックスを返します。そうでなければ、**fail** を返します。3番目のオプションの数値引数 `init` は検索を開始する場所を指定します。デフォルト値は 1 で、負の値も可能です。4番目のオプション引数 `plain` として **true** を指定すると、パターンマッチング機能がオフになり、関数は単純な「部分文字列検索」操作を行い、`pattern` 内の文字はマジックとして扱われません。

パターンにキャプチャがある場合、マッチが成功すると、キャプチャされた値も2つのインデックスの後に返されます。
