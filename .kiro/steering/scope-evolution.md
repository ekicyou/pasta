# スコープ進化ステアリング

仕様のスコープは議論によって進化するもの。安易な分割より、理由を守る統合を。

---

## 基本原則

### 1. スコープは議論で広がる

**推奨**: 仕様検討中に関連する課題が見つかったら、スコープ拡大を検討する
**理由**: 
- 関連する課題を分離すると、元の「理由」が失われる
- 別仕様を立ち上げると、コンテキストの再構築コストが発生
- 統合された仕様は、問題の全体像を保持できる

**例**:
```markdown
❌ 悪い例:
「単語辞書の実装」
→ 議論中に「アクター辞書も必要」と判明
→ 「アクター辞書は別仕様で」と分割
→ 元の「なぜ単語辞書が必要か」の文脈が失われる

✅ 良い例:
「単語辞書の実装」
→ 議論中に「アクター辞書も必要」と判明
→ スコープを「辞書システム全体」に拡大
→ 単語辞書とアクター辞書の関係性が明確に保たれる
```

### 2. 「スコープ外」判断の基準

以下の場合のみ「スコープ外」として分離を検討：

1. **技術スタックが異なる**: 例: フロントエンド仕様にバックエンドAPIの全体設計を含めない
2. **完全に独立している**: 例: ドキュメント整備と機能実装は分離可能
3. **Phase境界を超える**: 例: Phase 0の仕様にPhase 2の高度機能を含めない

**それ以外は原則スコープ拡大を検討する**

### 3. スコープ拡大の判断フロー

```
関連課題発見
    ↓
質問: 「この課題は元の仕様の『理由』と関係があるか？」
    ↓
YES → スコープ拡大を検討
    ↓
NO → 「スコープ外」として分離を検討
```

---

## 実践ガイドライン

### 要件定義フェーズ

**議論による要件追加を推奨**

```markdown
例: キャッシュファイル生成仕様

初期スコープ:
- Pasta DSL → Lua変換のキャッシュ生成

議論中の発見:
- finalize_scene()の呼び出しが必要
- pasta_shioriの失敗テストが5件存在（原因不明）

判断:
✅ finalize_scene()の仕様も本仕様に含める
   理由: キャッシュ生成の「理由」が初期化処理の効率化だから
   
✅ pasta_shiori修正も本仕様に含める
   理由: Phase 0完了基準への貢献が本仕様の目的だから
```

### 設計フェーズ

**設計判断でスコープを明確化**

- 実装範囲の境界を明示
- 依存する外部仕様があれば、それも含めるか判断
- 「後で実装」より「今含める」を優先

### タスク分解フェーズ

**タスクレベルでは分割しない**

- タスクは実装の手順であり、スコープではない
- 「別タスク」と「別仕様」を混同しない

---

## アンチパターン

### ❌ 安易な「スコープ外」宣言

```markdown
設計レビュー中:
「この部分は別仕様で実装します」

問題:
- なぜ別にするのか理由が不明確
- 元の仕様の「理由」が薄まる
- 実装時にコンテキストの再構築が必要
```

### ❌ Phase境界を理由にした分離

```markdown
「Phase 1の機能なので別仕様で」

問題:
- Phaseは優先順位であり、スコープの境界ではない
- Phase 0でPhase 1の準備をすることはよくある
```

### ❌ 実装の複雑さを理由にした分離

```markdown
「実装が大きくなりそうなので分割」

問題:
- 実装の複雑さは、タスク分解で対処すべき
- スコープ分離では対処できない
```

---

## 推奨パターン

### ✅ 議論でスコープを広げる

```markdown
要件定義中の議論:
「Aを実装するにはBも必要では？」

対応:
1. Bが必要な理由を明確化
2. 元の仕様の「理由」とBの関係を確認
3. 関係があれば、Requirementに追加
4. 設計フェーズで統合的に設計
```

### ✅ 矛盾をスコープ拡大で解消

```markdown
分析レポートの指摘:
「要件AとCが矛盾している」

対応（SOUL.md Section 5.6準拠）:
1. スコープを広げてA・C両方を満たせないか検討
2. 広げても解決しない場合のみ、優先順位判断
```

### ✅ Phase 0完了基準を明確に

```markdown
Phase 0の仕様では:
- Phase 0 DoD（完了基準）への貢献を明記
- DoD達成に必要な関連タスクも含める
- 「Phase 0完了」を部分達成ではなく完全達成とする
```

---

## スコープ変更の記録

スコープを広げた場合、以下を記録：

```markdown
## スコープ変更履歴

### [日付] 議題: XXXの追加
**追加内容**: YYYをスコープに含める
**理由**: ZZZのため
**影響**: 要件A・設計B・タスクCを追加
```

---

## SOUL.mdとの整合性

[SOUL.md](../../SOUL.md) Section 5.6:
> **矛盾対応**: スコープを広げて両立できないか検討

この原則をスコープ管理にも適用：
- **安易な分割より、理由を守る統合を**
- **議論によるスコープ進化を推奨**
- **Phase 0完了基準は完全達成を目指す**

---

## まとめ

- **スコープは固定ではなく、議論で進化する**
- **関連する課題は統合を検討、分離は最後の手段**
- **「理由」を失わないことが最優先**
- **Phase 0仕様ではDoD完全達成を目指す**
