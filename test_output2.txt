warning: unexpected `cfg` condition value: `old_api_tests`
   --> crates\pasta\src\engine.rs:782:17
    |
782 | #[cfg(all(test, feature = "old_api_tests"))]
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^ help: remove the condition
    |
    = note: no expected values for `feature`
    = help: consider adding `old_api_tests` as a feature in `Cargo.toml`
    = note: see <https://doc.rust-lang.org/nightly/rustc/check-cfg/cargo-specifics.html> for more information about checking conditional configuration
    = note: `#[warn(unexpected_cfgs)]` on by default

warning: field `cache` is never read
  --> crates\pasta\src\engine.rs:61:5
   |
53 | pub struct PastaEngine {
   |            ----------- field in this struct
...
61 |     cache: ParseCache,
   |     ^^^^^
   |
   = note: `#[warn(dead_code)]` (part of `#[warn(unused)]`) on by default

warning: associated function `build_engine` is never used
   --> crates\pasta\src\engine.rs:298:8
    |
 66 | impl PastaEngine {
    | ---------------- associated function in this implementation
...
298 |     fn build_engine(
    |        ^^^^^^^^^^^^

warning: function `parse_var_assign_from_parts` is never used
   --> crates\pasta\src\parser\mod.rs:530:4
    |
530 | fn parse_var_assign_from_parts(pair: Pair<Rule>) -> Result<Statement, PastaError> {
    |    ^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: function `parse_call_stmt` is never used
   --> crates\pasta\src\parser\mod.rs:598:4
    |
598 | fn parse_call_stmt(pair: Pair<Rule>) -> Result<Statement, PastaError> {
    |    ^^^^^^^^^^^^^^^

warning: function `parse_jump_stmt` is never used
   --> crates\pasta\src\parser\mod.rs:631:4
    |
631 | fn parse_jump_stmt(pair: Pair<Rule>) -> Result<Statement, PastaError> {
    |    ^^^^^^^^^^^^^^^

warning: function `parse_var_assign` is never used
   --> crates\pasta\src\parser\mod.rs:721:4
    |
721 | fn parse_var_assign(pair: Pair<Rule>) -> Result<Statement, PastaError> {
    |    ^^^^^^^^^^^^^^^^

warning: function `parse_rune_block` is never used
   --> crates\pasta\src\parser\mod.rs:754:4
    |
754 | fn parse_rune_block(pair: Pair<Rule>) -> Result<Statement, PastaError> {
    |    ^^^^^^^^^^^^^^^^

warning: `pasta` (lib) generated 8 warnings
    Finished `test` profile [unoptimized + debuginfo] target(s) in 0.11s
     Running tests\test_comprehensive_control_flow_transpile.rs (C:\home\maz\git\dcomp_sample-rs-2\target\debug\deps\test_comprehensive_control_flow_transpile-a5602e3588370296.exe)

running 1 test
=== Rune Compilation Diagnostics ===
Warning(WarningDiagnostic { source_id: 1, kind: NotUsed { span: 2302:2584, context: None } })
=== Generated Code ===
use pasta_stdlib::*;

pub mod 繝｡繧､繝ｳ_1 {
    use pasta_stdlib::*;
    use crate::{縺・↓繧・≧, 縺輔￥繧厭;

    pub fn __start__(ctx, args) {
        let 繧ｫ繧ｦ繝ｳ繧ｿ = 10;
        ctx.actor = 縺輔￥繧・
        yield Actor("縺輔￥繧・);
        yield pasta_stdlib::word(ctx, "謖ｨ諡ｶ", []);
        ctx.actor = 縺・↓繧・≧;
        yield Actor("縺・↓繧・≧");
        yield pasta_stdlib::word(ctx, "繝ｭ繝ｼ繧ｫ繝ｫ髢｢謨ｰ", ["縺ｯ繧阪・"]);
        for a in crate::pasta::call(ctx, "閾ｪ蟾ｱ邏ｹ莉・, #{}, []) { yield a; }
        let 繧ｫ繧ｦ繝ｳ繧ｿ = 1;
        for a in crate::pasta::call(ctx, "繧ｫ繧ｦ繝ｳ繝郁｡ｨ遉ｺ", #{}, [繧ｫ繧ｦ繝ｳ繧ｿ]) { yield a; }
        for a in crate::pasta::jump(ctx, "莨夊ｩｱ蛻・ｲ・, #{}, []) { yield a; }
    }
    pub fn 閾ｪ蟾ｱ邏ｹ莉祇1(ctx, args) {
        ctx.actor = 縺輔￥繧・
        yield Actor("縺輔￥繧・);
        yield Talk("遘√・縺輔￥繧峨〒縺吶・);
        ctx.actor = 縺・↓繧・≧;
        yield Actor("縺・↓繧・≧");
        yield Talk("蜒輔・縺・↓繧・≧縺繧医・);
        for a in crate::pasta::call(ctx, "雜｣蜻ｳ邏ｹ莉・, #{}, []) { yield a; }
    }

    pub fn 雜｣蜻ｳ邏ｹ莉祇1(ctx, args) {
        ctx.actor = 縺輔￥繧・
        yield Actor("縺輔￥繧・);
        yield Talk("遘√・雜｣蜻ｳ縺ｯ隱ｭ譖ｸ縺ｧ縺吶・);
        ctx.actor = 縺・↓繧・≧;
        yield Actor("縺・↓繧・≧");
        yield Talk("蜒輔・繧ｲ繝ｼ繝縺悟･ｽ縺阪・);
    }

    pub fn 繧ｫ繧ｦ繝ｳ繝郁｡ｨ遉ｺ_1(ctx, args) {
        ctx.actor = 縺輔￥繧・
        yield Actor("縺輔￥繧・);
        yield Talk("繧ｫ繧ｦ繝ｳ繧ｿ繝ｼ縺ｯ・・､縺ｧ縺吶・);
    }

    pub fn 莨夊ｩｱ蛻・ｲ神1(ctx, args) {
        ctx.actor = 縺輔￥繧・
        yield Actor("縺輔￥繧・);
        yield pasta_stdlib::word(ctx, "蝣ｴ謇縺ｮ螟ｩ豌励・", []);
        yield pasta_stdlib::word(ctx, "螟ｩ豌励□縺ｭ", []);
        yield Talk("縲・);
        ctx.actor = 縺・↓繧・≧;
        yield Actor("縺・↓繧・≧");
        yield Talk("縺昴≧縺縺ｭ縲・);
        for a in crate::pasta::jump(ctx, "蛻･縺ｮ隧ｱ鬘・, #{}, []) { yield a; }
    }

    pub fn 蛻･縺ｮ隧ｱ鬘契1(ctx, args) {
        ctx.actor = 縺輔￥繧・
        yield Actor("縺輔￥繧・);
        yield Talk("縺ｨ縺薙ｍ縺ｧ縲∵・譌･縺ｯ菴輔☆繧具ｼ・);
        ctx.actor = 縺・↓繧・≧;
        yield Actor("縺・↓繧・≧");
        yield Talk("縺ｾ縺豎ｺ繧√※縺ｪ縺・↑縺√・);
        pub fn 繝ｭ繝ｼ繧ｫ繝ｫ髢｢謨ｰ(ctx, args) {
        let 繝｡繝・そ繝ｼ繧ｸ = args[0];
        ctx.actor = super::縺・↓繧・≧;
        yield #{ type: "Actor", actor: ctx.actor };
        yield #{ type: "Talk", text: `繝ｭ繝ｼ繧ｫ繝ｫ髢｢謨ｰ縺悟他縺ｰ繧後∪縺励◆: ${繝｡繝・そ繝ｼ繧ｸ}` };
        }
    }

}

pub mod pasta {

    pub fn jump(ctx, label, filters, args) {
        let id = pasta_stdlib::select_label_to_id(label, filters);
        match id {
            1 => { for a in crate::繝｡繧､繝ｳ_1::__start__(ctx, args) { yield a; } },
            2 => { for a in crate::繝｡繧､繝ｳ_1::閾ｪ蟾ｱ邏ｹ莉祇1(ctx, args) { yield a; } },
            3 => { for a in crate::繝｡繧､繝ｳ_1::雜｣蜻ｳ邏ｹ莉祇1(ctx, args) { yield a; } },
            4 => { for a in crate::繝｡繧､繝ｳ_1::繧ｫ繧ｦ繝ｳ繝郁｡ｨ遉ｺ_1(ctx, args) { yield a; } },
            5 => { for a in crate::繝｡繧､繝ｳ_1::莨夊ｩｱ蛻・ｲ神1(ctx, args) { yield a; } },
            6 => { for a in crate::繝｡繧､繝ｳ_1::蛻･縺ｮ隧ｱ鬘契1(ctx, args) { yield a; } },
            _ => { yield pasta_stdlib::Error(`繝ｩ繝吶ΝID ${id} 縺瑚ｦ九▽縺九ｊ縺ｾ縺帙ｓ縺ｧ縺励◆縲Ａ); },
        }
    }

    pub fn call(ctx, label, filters, args) {
        let id = pasta_stdlib::select_label_to_id(label, filters);
        match id {
            1 => { for a in crate::繝｡繧､繝ｳ_1::__start__(ctx, args) { yield a; } },
            2 => { for a in crate::繝｡繧､繝ｳ_1::閾ｪ蟾ｱ邏ｹ莉祇1(ctx, args) { yield a; } },
            3 => { for a in crate::繝｡繧､繝ｳ_1::雜｣蜻ｳ邏ｹ莉祇1(ctx, args) { yield a; } },
            4 => { for a in crate::繝｡繧､繝ｳ_1::繧ｫ繧ｦ繝ｳ繝郁｡ｨ遉ｺ_1(ctx, args) { yield a; } },
            5 => { for a in crate::繝｡繧､繝ｳ_1::莨夊ｩｱ蛻・ｲ神1(ctx, args) { yield a; } },
            6 => { for a in crate::繝｡繧､繝ｳ_1::蛻･縺ｮ隧ｱ鬘契1(ctx, args) { yield a; } },
            _ => { yield pasta_stdlib::Error(`繝ｩ繝吶ΝID ${id} 縺瑚ｦ九▽縺九ｊ縺ｾ縺帙ｓ縺ｧ縺励◆縲Ａ); },
        }
    }
}


thread 'test_comprehensive_control_flow_rune_compile' (36904) panicked at crates\pasta\tests\test_comprehensive_control_flow_transpile.rs:82:5:
Rune繧ｳ繝ｳ繝代う繝ｫ縺ｧ繧ｨ繝ｩ繝ｼ縺檎匱逕・ Diagnostics { diagnostics: [Warning(WarningDiagnostic { source_id: 1, kind: NotUsed { span: 2302:2584, context: None } })], mode: All, has_error: false, has_warning: true }
stack backtrace:
   0: std::panicking::panic_handler
             at /rustc/ded5c06cf21d2b93bffd5d884aa6e96934ee4234/library\std\src\panicking.rs:698
   1: core::panicking::panic_fmt
             at /rustc/ded5c06cf21d2b93bffd5d884aa6e96934ee4234/library\core\src\panicking.rs:80
   2: test_comprehensive_control_flow_transpile::test_comprehensive_control_flow_rune_compile
             at .\tests\test_comprehensive_control_flow_transpile.rs:82
   3: test_comprehensive_control_flow_transpile::test_comprehensive_control_flow_rune_compile::closure$0
             at .\tests\test_comprehensive_control_flow_transpile.rs:36
   4: core::ops::function::FnOnce::call_once<test_comprehensive_control_flow_transpile::test_comprehensive_control_flow_rune_compile::closure_env$0,tuple$<> >
             at C:\rust\up\toolchains\stable-x86_64-pc-windows-msvc\lib\rustlib\src\rust\library\core\src\ops\function.rs:250
   5: core::ops::function::FnOnce::call_once
             at /rustc/ded5c06cf21d2b93bffd5d884aa6e96934ee4234/library\core\src\ops\function.rs:250
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
test test_comprehensive_control_flow_rune_compile ... FAILED

failures:

failures:
    test_comprehensive_control_flow_rune_compile

test result: FAILED. 0 passed; 1 failed; 0 ignored; 0 measured; 1 filtered out; finished in 0.22s

error: test failed, to rerun pass `--test test_comprehensive_control_flow_transpile`
