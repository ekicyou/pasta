(function(){define(["engine/jsutil"],function(){var a;a=(function(){function b(c){this.getAllItemsFunc=c;this.reset()}b.prototype.reset=function(){this.allItems=void 0};b.prototype.getAllItems=function(){if(!(this.allItems!=null)){this.allItems=this.getAllItemsFunc();this.cache={}}return this.allItems};b.prototype.getOne=function(c){var d;d=this.cache[c.key];if(!(d!=null)){d=c.func(this.getAllItems());this.cache[c.key]=d}return d};b.prototype.get=function(h){var g,i,j,k,l,c,d,e,f;l="";k=this.getAllItems();for(c=0,e=h.length;c<e;c++){g=h[c];i=this.getOne(g);if(i.length<=k.length){l=g.key;k=i}}j=k;for(d=0,f=h.length;d<f;d++){g=h[d];if(l!==g.key){j=g.func(j)}}return j};return b})();return a})}).call(this);