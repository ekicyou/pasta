# 10. 単語定義（Word Definition）

## 10.1 グローバル単語定義

```pasta
＠word_name ： value1、value2、...
```

**セマンティクス**: ファイル全体で参照可能な辞書エントリ

## 10.2 ローカル単語定義

```pasta
  ＠word_name ： value1、value2、...
```

**セマンティクス**: 親シーン内で参照可能

## 10.3 単語参照

**構文**:
```text
会話行内: ＠word_name
Lua コード内: pasta.word_lookup(ctx, "word_name")
```

**スコープ解決ルール**（[4.1.4 Call スコープ解決](04-call-spec.md#414-スコープ解決アルゴリズム)と同一仕様）:
- 単語参照にスコープ修飾子は不要
- `＠word_name` で、現在のグローバルシーンスコープ内のローカル単語 + グローバル単語の全候補から**前方一致検索**
- 異なるグローバルシーンスコープでは、同じ単語名でも異なる結果を返す可能性がある（ローカル単語が異なるため）
- 参照：[4.1.4 スコープ解決アルゴリズム](04-call-spec.md#414-スコープ解決アルゴリズム)と共通のスコープ解決アルゴリズム

**動的単語参照**:
- `＠＄var_name` 形式で、変数値を単語名として間接参照可能
- セマンティクス：`＄var_name` で取得した値を単語名として `＠単語検索` を実行
- **実装状態**：文法定義済み、実装は将来予定

**制限（v1）**:
- 多段階参照（例：`＠＠word`、`＠＠＠word`）は非対応。
- `＠＠` はリテラルの「＠」1文字を埋め込むためのエスケープとしてのみ使用する。
- 多段解決が必要な場合は関数呼び出し（例：`＠resolve(word：... )`）で代替する。

---

**関連章**:
- [Chapter 2: キーワード・マーカー定義](02-markers.md) - 単語マーカー（＠）
- [Chapter 4: Call の詳細仕様](04-call-spec.md) - スコープ解決アルゴリズム
- [Chapter 6: アクション行](06-action-line.md) - インライン単語参照
- [Chapter 11: アクター辞書](11-actor-dictionary.md) - アクタースコープ単語
