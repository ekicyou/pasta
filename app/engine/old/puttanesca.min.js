(function(){var a=[].slice;define(["scripts/jsutil","modernizr"],function(){var q,b,c,e,d,f,g,h,i,j,k,l,m,n,o,p,r,s,t,u,v;e=function(w){return w};t="（［｛「『([{｢";f="、。，．・？！゛゜ヽヾゝゞ々）］｝」』!),.:;?]}｡｣､･ﾞﾟ‥…";g=e("、  ，                                  ,        ､       ");i=e("            ！                        !                 ");k=e("  。  ．・？                               .?  ｡  ･  ‥…");m="、。，．,.";p=20;h=50;j=100;l=150;s=200;n=function(w){var x;x=function(y){return(y.indexOf(w))>-1};if(w===" "){return"normal"}else{if(x(t)){return"start"}else{if(x(f)){if(x(g)){return"end1"}else{if(x(i)){return"end2"}else{if(x(k)){return"end3"}else{return"end"}}}}}}};o=function(w){var x;x=n(w);switch(x){case"end":return 1;case"end1":return 1;case"end2":return 2;case"end3":return 3;default:return 0}};u=function(A){var z,w,x,y;y=[];for(w=0,x=A.length;w<x;w++){z=A[w];y.push(z)}return y};v=function(A){var z,B,C,D,E,w,x,y;B=[];E=0;y=[];for(w=0,x=A.length;w<x;w++){z=A[w];D="normal";C=void 0;if(z===" "){y.push(D="normal")}else{if(t.indexOf(z>-1)){y.push(D="start")}else{if(f.indexOf(z>-1)){D="end";if(g.indexOf(z>-1)){y.push(C="end1")}else{if(i.indexOf(z>-1)){y.push(C="end2")}else{if(k.indexOf(z>-1)){y.push(C="end3")}else{y.push(void 0)}}}}else{y.push(void 0)}}}}return y};b=function(A,B){var z,C,w,x,y;C=void 0;y=u(B);for(w=0,x=y.length;w<x;w++){z=y[w];C=$("<span />").appendTo(A);C.text(z);C.attr({"data-w":o(z)})}if(C!=null){C.attr({"data-w":4})}};c=function(){var y,z,A,B,C,D,w,x;z=arguments[0],y=arguments[1],C=3<=arguments.length?a.call(arguments,2):[];D=$("<p />").appendTo(z);D.addClass(y);A=true;for(w=0,x=C.length;w<x;w++){B=C[w];if(A){A=false}else{$("<br />").appendTo(D)}b(D,B)}};d=function(w){return Rx.Observable.timer(w)};r=function(B){var w,x,y,z,A,C,D,E,F,G,H;$("div#mainArea").removeClass("show");F=0;G=0;w=[];D=-1;x=120;y=new Rx.CompositeDisposable;H="break";z=function(){var I,J,K,L,M,N,O,P;I=$(this);P=I.data("w");K=D<0?(D=P,4):P>0?(P>D?D=P:void 0,0):(L=D,D=0,L);J=(function(){switch(K){case 1:return x*2;case 2:return x*3;case 3:return x*4;case 4:return x*6;default:return 0}})();F+=J;N=I.text();D=P;I.fadeTo(0,0.001);M=Rx.Disposable.create(function(){return I.fadeTo(300,1)});y.add(M);O=d(F).subscribe(function(){return M.dispose()});y.add(O);I.attr({"data-span":F-G,"data-ms":F});G=F;return F+=x};E=function(){};$("#mainArea section").each(function(){$("p",this).each(function(){D=-1;return $("span",this).each(z)});return F+=x*3});y.add(A=Rx.Disposable.create(function(){return B(H)}));C=Rx.Observable.timer(F).subscribe(function(){H="end";return y.dispose()});y.add(C);y.add(Rx.Observable.timer(0).subscribe(function(){return $("div#mainArea").addClass("show")}));return y};$(document).ready(function(){if(window.is_webkit){return $("#actor div.webkit").css({display:"block"})}else{return $("#actor div.ie").css({display:"block"})}});q=(function(){function w(){}w.prototype.loadTest=function(){var x,y,z,A,B;if(typeof console!=="undefined"&&console!==null){console.log("[Puttanesca::loadTest]")}y=document;A=$("#text1 div").empty();c(A,"a2 t1","今日も暑いですね。");c(A,"a1 t1","そーですねえ。");c(A,"a2 t1","汗かかない？一枚脱ぐ？");B=$("#text2 div").empty();c(B,"a1 t1","それって、逆に汗かきませんか？");c(B,"a2 t1","・・・・・・・・。");x=void 0;z=function(){return x=r(function(){return typeof console!=="undefined"&&console!==null?console.log("トーク終了！"):void 0})};z();$("#actor").rx$liveclick().throttle(300).subscribe(function(C){if(typeof console!=="undefined"&&console!==null){console.log("おでこクリック！",C.target.outerHTML)}if(x.isDisposed()){return z()}else{return x.dispose()}})};return w})();return q})}).call(this);